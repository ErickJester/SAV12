# Mapa Completo de Navegaci√≥n - SAV12

## üó∫Ô∏è Estructura de Navegaci√≥n por Rol

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        LOGIN (/login)                            ‚îÇ
‚îÇ  - Validaci√≥n de credenciales                                    ‚îÇ
‚îÇ  - Redirecci√≥n autom√°tica seg√∫n rol                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ             ‚îÇ             ‚îÇ
         ‚ñº             ‚ñº             ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇUSUARIO ‚îÇ    ‚îÇ T√âCNICO ‚îÇ   ‚îÇ  ADMIN   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üë§ ROL: USUARIO

### Panel Principal (`/usuario/panel`)
‚îú‚îÄ‚îÄ Resumen de tickets (total, abiertos, en proceso, resueltos)
‚îú‚îÄ‚îÄ √öltimos 5 tickets creados
‚îî‚îÄ‚îÄ Acciones r√°pidas
    ‚îú‚îÄ‚îÄ ‚Üí Crear Ticket
    ‚îî‚îÄ‚îÄ ‚Üí Ver Mis Tickets

### Crear Ticket (`/usuario/crear-ticket`)
‚îú‚îÄ‚îÄ Formulario de creaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ T√≠tulo *
‚îÇ   ‚îú‚îÄ‚îÄ Descripci√≥n *
‚îÇ   ‚îú‚îÄ‚îÄ Categor√≠a * (select)
‚îÇ   ‚îú‚îÄ‚îÄ Ubicaci√≥n * (select)
‚îÇ   ‚îú‚îÄ‚îÄ Prioridad (BAJA, MEDIA, ALTA, URGENTE)
‚îÇ   ‚îî‚îÄ‚îÄ Evidencia (URL o descripci√≥n)
‚îî‚îÄ‚îÄ ‚Üí POST: `/usuario/crear-ticket`
    ‚îî‚îÄ‚îÄ Redirecci√≥n: `/usuario/mis-tickets?success=created`

### Mis Tickets (`/usuario/mis-tickets`)
‚îú‚îÄ‚îÄ Tabla con todos mis tickets
‚îÇ   ‚îú‚îÄ‚îÄ ID
‚îÇ   ‚îú‚îÄ‚îÄ T√≠tulo
‚îÇ   ‚îú‚îÄ‚îÄ Estado (badge con color)
‚îÇ   ‚îú‚îÄ‚îÄ Prioridad (badge con color)
‚îÇ   ‚îú‚îÄ‚îÄ Fecha de creaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ T√©cnico asignado
‚îÇ   ‚îî‚îÄ‚îÄ [Ver] ‚Üí Detalle
‚îî‚îÄ‚îÄ Filtros por estado (futuro)

### Detalle de Ticket (`/usuario/ticket/{id}`)
‚îú‚îÄ‚îÄ Informaci√≥n completa
‚îÇ   ‚îú‚îÄ‚îÄ T√≠tulo y estado
‚îÇ   ‚îú‚îÄ‚îÄ Categor√≠a, ubicaci√≥n, prioridad
‚îÇ   ‚îú‚îÄ‚îÄ Fechas (creaci√≥n, actualizaci√≥n)
‚îÇ   ‚îú‚îÄ‚îÄ T√©cnico asignado
‚îÇ   ‚îî‚îÄ‚îÄ Descripci√≥n y evidencia
‚îú‚îÄ‚îÄ Secci√≥n de Comentarios
‚îÇ   ‚îú‚îÄ‚îÄ Lista de comentarios (orden cronol√≥gico)
‚îÇ   ‚îî‚îÄ‚îÄ Formulario agregar comentario
‚îÇ       ‚îî‚îÄ‚îÄ ‚Üí POST: `/usuario/ticket/{id}/comentar`
‚îú‚îÄ‚îÄ Historial de Acciones (sidebar)
‚îÇ   ‚îî‚îÄ‚îÄ Todas las acciones con usuario y fecha
‚îî‚îÄ‚îÄ Opciones seg√∫n estado
    ‚îî‚îÄ‚îÄ Si est√° RESUELTO o CERRADO:
        ‚îî‚îÄ‚îÄ [Reabrir Ticket] ‚Üí POST: `/usuario/ticket/{id}/reabrir`

---

## üîß ROL: T√âCNICO

### Panel Principal (`/tecnico/panel`)
‚îú‚îÄ‚îÄ Resumen de tickets
‚îÇ   ‚îú‚îÄ‚îÄ Tickets asignados a m√≠
‚îÇ   ‚îú‚îÄ‚îÄ Tickets sin asignar
‚îÇ   ‚îú‚îÄ‚îÄ En proceso
‚îÇ   ‚îî‚îÄ‚îÄ Resueltos
‚îú‚îÄ‚îÄ Tickets Disponibles para Asignar
‚îÇ   ‚îú‚îÄ‚îÄ Lista de tickets sin t√©cnico
‚îÇ   ‚îî‚îÄ‚îÄ Para cada ticket:
‚îÇ       ‚îú‚îÄ‚îÄ [Ver Detalles]
‚îÇ       ‚îî‚îÄ‚îÄ [Asignarme] ‚Üí POST: `/tecnico/ticket/{id}/asignar`
‚îî‚îÄ‚îÄ Mis Tickets Recientes (√∫ltimos 5)
    ‚îî‚îÄ‚îÄ [Ver y Actualizar] ‚Üí Detalle

### Mis Tickets (`/tecnico/mis-tickets`)
‚îú‚îÄ‚îÄ Tabla de tickets asignados a m√≠
‚îÇ   ‚îú‚îÄ‚îÄ ID, T√≠tulo, Usuario
‚îÇ   ‚îú‚îÄ‚îÄ Estado, Prioridad
‚îÇ   ‚îú‚îÄ‚îÄ Fecha de creaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ [Ver/Actualizar] ‚Üí Detalle
‚îî‚îÄ‚îÄ Ordenado por fecha (m√°s recientes primero)

### Detalle de Ticket (`/tecnico/ticket/{id}`)
‚îú‚îÄ‚îÄ Informaci√≥n completa del ticket
‚îÇ   ‚îî‚îÄ‚îÄ (similar a usuario + m√°s detalles)
‚îú‚îÄ‚îÄ **Cambiar Estado del Ticket**
‚îÇ   ‚îú‚îÄ‚îÄ Formulario de cambio de estado
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Nuevo Estado (select con todos los estados)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Observaciones (textarea)
‚îÇ   ‚îî‚îÄ‚îÄ ‚Üí POST: `/tecnico/ticket/{id}/cambiar-estado`
‚îÇ       ‚îî‚îÄ‚îÄ Registra en historial autom√°ticamente
‚îú‚îÄ‚îÄ Si ticket NO asignado:
‚îÇ   ‚îî‚îÄ‚îÄ [Asignarme este Ticket]
‚îú‚îÄ‚îÄ Secci√≥n de Comentarios
‚îÇ   ‚îú‚îÄ‚îÄ Ver todos los comentarios
‚îÇ   ‚îî‚îÄ‚îÄ Agregar comentario t√©cnico
‚îÇ       ‚îî‚îÄ‚îÄ ‚Üí POST: `/tecnico/ticket/{id}/comentar`
‚îî‚îÄ‚îÄ Historial de Acciones completo

---

## üë®‚Äçüíº ROL: ADMINISTRADOR

### Panel Principal (`/admin/panel`)
‚îú‚îÄ‚îÄ Resumen General del Sistema
‚îÇ   ‚îú‚îÄ‚îÄ Total de tickets
‚îÇ   ‚îú‚îÄ‚îÄ Tickets por estado (6 tarjetas)
‚îÇ   ‚îî‚îÄ‚îÄ Estad√≠sticas globales
‚îî‚îÄ‚îÄ Acciones R√°pidas (tarjetas)
    ‚îú‚îÄ‚îÄ ‚Üí Gestionar Usuarios
    ‚îú‚îÄ‚îÄ ‚Üí Ver Todos los Tickets
    ‚îú‚îÄ‚îÄ ‚Üí Gestionar Categor√≠as
    ‚îú‚îÄ‚îÄ ‚Üí Gestionar Ubicaciones
    ‚îî‚îÄ‚îÄ ‚Üí Ver Reportes

### Gesti√≥n de Usuarios (`/admin/usuarios`)
‚îú‚îÄ‚îÄ Tabla de todos los usuarios
‚îÇ   ‚îú‚îÄ‚îÄ ID, Nombre, Correo
‚îÇ   ‚îú‚îÄ‚îÄ Rol (badge)
‚îÇ   ‚îú‚îÄ‚îÄ Boleta/ID Trabajador
‚îÇ   ‚îú‚îÄ‚îÄ Estado (Activo/Inactivo)
‚îÇ   ‚îî‚îÄ‚îÄ Acciones:
‚îÇ       ‚îú‚îÄ‚îÄ [Activar/Desactivar]
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ POST: `/admin/usuarios/{id}/cambiar-estado`
‚îÇ       ‚îî‚îÄ‚îÄ Cambiar Rol
‚îÇ           ‚îú‚îÄ‚îÄ Select: USUARIO, TECNICO, ADMIN
‚îÇ           ‚îî‚îÄ‚îÄ POST: `/admin/usuarios/{id}/cambiar-rol`
‚îî‚îÄ‚îÄ Buscar/Filtrar usuarios (futuro)

### Gesti√≥n de Categor√≠as (`/admin/categorias`)
‚îú‚îÄ‚îÄ **Panel Izquierdo**: Crear Nueva Categor√≠a
‚îÇ   ‚îú‚îÄ‚îÄ Nombre *
‚îÇ   ‚îú‚îÄ‚îÄ Descripci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ ‚Üí POST: `/admin/categorias/crear`
‚îî‚îÄ‚îÄ **Panel Derecho**: Categor√≠as Existentes
    ‚îú‚îÄ‚îÄ Tabla con todas las categor√≠as
    ‚îÇ   ‚îú‚îÄ‚îÄ ID, Nombre, Descripci√≥n
    ‚îÇ   ‚îú‚îÄ‚îÄ Estado (Activa/Inactiva)
    ‚îÇ   ‚îî‚îÄ‚îÄ [Desactivar]
    ‚îÇ       ‚îî‚îÄ‚îÄ POST: `/admin/categorias/{id}/desactivar`
    ‚îî‚îÄ‚îÄ Solo se muestran en selects las activas

### Gesti√≥n de Ubicaciones (`/admin/ubicaciones`)
‚îú‚îÄ‚îÄ **Panel Izquierdo**: Crear Nueva Ubicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ Edificio *
‚îÇ   ‚îú‚îÄ‚îÄ Piso
‚îÇ   ‚îú‚îÄ‚îÄ Sal√≥n
‚îÇ   ‚îî‚îÄ‚îÄ ‚Üí POST: `/admin/ubicaciones/crear`
‚îî‚îÄ‚îÄ **Panel Derecho**: Ubicaciones Existentes
    ‚îú‚îÄ‚îÄ Tabla con todas las ubicaciones
    ‚îÇ   ‚îú‚îÄ‚îÄ ID, Edificio, Piso, Sal√≥n
    ‚îÇ   ‚îú‚îÄ‚îÄ Estado (Activa/Inactiva)
    ‚îÇ   ‚îî‚îÄ‚îÄ [Desactivar]
    ‚îÇ       ‚îî‚îÄ‚îÄ POST: `/admin/ubicaciones/{id}/desactivar`
    ‚îî‚îÄ‚îÄ Solo se muestran en selects las activas

### Gesti√≥n de Tickets (`/admin/tickets`)
‚îú‚îÄ‚îÄ Tabla con TODOS los tickets del sistema
‚îÇ   ‚îú‚îÄ‚îÄ ID, T√≠tulo, Usuario
‚îÇ   ‚îú‚îÄ‚îÄ Estado, Prioridad
‚îÇ   ‚îú‚îÄ‚îÄ T√©cnico asignado
‚îÇ   ‚îú‚îÄ‚îÄ Fecha de creaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ **Asignar T√©cnico**
‚îÇ       ‚îú‚îÄ‚îÄ Select con lista de t√©cnicos
‚îÇ       ‚îî‚îÄ‚îÄ POST: `/admin/tickets/{id}/asignar-tecnico`
‚îî‚îÄ‚îÄ Ver estad√≠sticas globales

### Reportes y SLA (`/admin/reportes`)
‚îú‚îÄ‚îÄ **Resumen General**
‚îÇ   ‚îî‚îÄ‚îÄ 6 tarjetas con totales por estado
‚îú‚îÄ‚îÄ **Cumplimiento de SLA**
‚îÇ   ‚îú‚îÄ‚îÄ Porcentaje general de cumplimiento
‚îÇ   ‚îú‚îÄ‚îÄ Tickets que cumplen SLA
‚îÇ   ‚îú‚îÄ‚îÄ Tickets que incumplen SLA
‚îÇ   ‚îî‚îÄ‚îÄ C√°lculo basado en tiempo de resoluci√≥n vs SLA definido
‚îú‚îÄ‚îÄ **Distribuci√≥n por Estado**
‚îÇ   ‚îî‚îÄ‚îÄ Tabla con cantidad de tickets por cada estado
‚îî‚îÄ‚îÄ **Exportar Reportes**
    ‚îú‚îÄ‚îÄ [Imprimir Reporte] (window.print)
    ‚îî‚îÄ‚îÄ [Exportar a CSV] (en desarrollo)

---

## üîÑ Flujos de Trabajo

### Flujo 1: Usuario Crea y Sigue Ticket

```
Usuario ‚Üí Login ‚Üí Panel Usuario ‚Üí Crear Ticket
    ‚Üì
Completa formulario (t√≠tulo, descripci√≥n, categor√≠a, ubicaci√≥n)
    ‚Üì
Ticket creado ‚Üí Estado: ABIERTO ‚Üí Historial: "Ticket creado"
    ‚Üì
Usuario ve en "Mis Tickets"
    ‚Üì
Puede agregar comentarios, ver estado, reabrir si se cierra
```

### Flujo 2: T√©cnico Gestiona Ticket

```
T√©cnico ‚Üí Login ‚Üí Panel T√©cnico
    ‚Üì
Ve "Tickets Disponibles" (sin asignar)
    ‚Üì
[Asignarme] ‚Üí Ticket asignado al t√©cnico
    ‚Üì
Estado cambia a: EN_PROCESO
    ‚Üì
T√©cnico ve detalle, analiza problema
    ‚Üì
Agrega comentarios con soluci√≥n
    ‚Üì
Cambia estado a: RESUELTO
    ‚Üì
Todo queda registrado en historial
```

### Flujo 3: Admin Supervisa y Configura

```
Admin ‚Üí Login ‚Üí Panel Admin
    ‚Üì
Opci√≥n A: Ver reportes de SLA y cumplimiento
Opci√≥n B: Gestionar usuarios (cambiar roles, activar/desactivar)
Opci√≥n C: Crear/gestionar categor√≠as y ubicaciones
Opci√≥n D: Asignar t√©cnicos espec√≠ficos a tickets
Opci√≥n E: Ver todos los tickets y estad√≠sticas globales
```

---

## üîê Control de Acceso

### Sin Autenticaci√≥n
- `/` ‚Üí Redirige a `/login`
- `/login` (GET/POST)
- `/registro` (GET/POST)

### Con Autenticaci√≥n - Por Rol

| Ruta                | USUARIO | T√âCNICO | ADMIN |
|---------------------|---------|---------|-------|
| `/usuario/*`        | ‚úÖ      | ‚ùå      | ‚ùå    |
| `/tecnico/*`        | ‚ùå      | ‚úÖ      | ‚ùå    |
| `/admin/*`          | ‚ùå      | ‚ùå      | ‚úÖ    |
| `/logout`           | ‚úÖ      | ‚úÖ      | ‚úÖ    |

*Cada controlador verifica el rol en sesi√≥n antes de procesar la petici√≥n*

---

## üìä Estados y Transiciones

### Estados de Ticket

```
ABIERTO ‚Üí (t√©cnico se asigna) ‚Üí EN_PROCESO
    ‚Üì                              ‚Üì
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí RESUELTO
                                    ‚Üì
                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                              ‚Üì           ‚Üì
                          CERRADO     REABIERTO
                                        ‚Üì
                                   EN_PROCESO
```

### Qui√©n puede cambiar estados

- **ABIERTO** ‚Üí **EN_PROCESO**: T√©cnico (al asignarse)
- **EN_PROCESO** ‚Üí **RESUELTO**: T√©cnico
- **RESUELTO** ‚Üí **CERRADO**: T√©cnico o Admin
- **RESUELTO** ‚Üí **REABIERTO**: Usuario
- **CERRADO** ‚Üí **REABIERTO**: Usuario

---

## üìà M√©tricas y Reportes

### C√°lculo de SLA
```
Tiempo de Resoluci√≥n = Fecha Resoluci√≥n - Fecha Creaci√≥n
SLA Definido = 24 horas (por defecto)

Si Tiempo de Resoluci√≥n ‚â§ SLA ‚Üí Cumple SLA ‚úÖ
Si Tiempo de Resoluci√≥n > SLA ‚Üí Incumple SLA ‚ùå

Porcentaje de Cumplimiento = (Tickets que cumplen / Total resueltos) √ó 100
```

### Datos para Reportes
- Total de tickets en el sistema
- Tickets por estado (ABIERTO, EN_PROCESO, etc.)
- Tickets que cumplen/incumplen SLA
- Tiempo promedio de resoluci√≥n
- Tickets por t√©cnico
- Tickets por categor√≠a

---

## üé® Elementos Visuales

### Badges de Estado
- **ABIERTO** ‚Üí Azul (#17a2b8)
- **EN_PROCESO** ‚Üí Amarillo (#ffc107)
- **RESUELTO** ‚Üí Verde (#28a745)
- **CERRADO** ‚Üí Gris (#6c757d)
- **REABIERTO** ‚Üí Rojo (#dc3545)

### Badges de Prioridad
- **BAJA** ‚Üí Celeste claro
- **MEDIA** ‚Üí Amarillo claro
- **ALTA** ‚Üí Rojo claro
- **URGENTE** ‚Üí Rojo intenso

### Badges de Rol
- **USUARIO** ‚Üí Azul (#007bff)
- **TECNICO** ‚Üí Naranja (#fd7e14)
- **ADMIN** ‚Üí P√∫rpura (#6610f2)

---

Esta es la estructura completa de navegaci√≥n del sistema SAV12. Cada ruta est√° protegida por validaci√≥n de sesi√≥n y rol.
